(this["webpackJsonpreact-sandbox"]=this["webpackJsonpreact-sandbox"]||[]).push([[0],{80:function(e,t,n){"use strict";n.r(t),n.d(t,"app",(function(){return st})),n.d(t,"chatRef",(function(){return ot}));var r,c,a,i,s,o,d,u,j,l,b,O,h,x,p,g,f,m,v,C,w=n(1),k=n.n(w),y=n(42),D=n.n(y),M=n(53),S=n(7),I=n(36),L=n(8),Y=n(20),N=n(11),A="/",B="/redux-page1",H="/redux-page2",P="/redux-thunk-page1",T="/fire-base-page1",F=n(2),R=function(){return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Y.b,{to:A,children:"Top"}),Object(F.jsx)(Y.b,{to:B,children:"Page1"}),Object(F.jsx)(Y.b,{to:H,children:"Page2"})]})},U=n(14),_=function(){return{dispatch:Object(I.b)()}},z=n(16),E=I.c,G=Object(z.b)({name:"counter",initialState:0,reducers:{increment:function(e){1},decrement:function(e){1},incrementByAmount:function(e,t){t.payload}}}),J=G.actions,K=J.increment,X=J.decrement,q=J.incrementByAmount,Q=function(){return{count:E((function(e){return e.counter}))}},V=G.reducer,W=function(){var e=_().dispatch,t=Q().count,n=Object(w.useState)(2),r=Object(U.a)(n,2),c=r[0],a=r[1];return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{children:"Page1"}),Object(F.jsx)("button",{onClick:function(){return e(K())},children:"\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8"}),Object(F.jsx)("button",{onClick:function(){return e(X())},children:"\u30c7\u30af\u30ea\u30e1\u30f3\u30c8"}),Object(F.jsx)("input",{value:c,onChange:function(e){return a(Number(e.target.value))}}),Object(F.jsx)("button",{onClick:function(){return e(q(c))},children:"\u6570\u5024\u5206\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8"}),Object(F.jsx)("div",{children:t})]})},Z=function(){var e=_().dispatch,t=Q().count,n=Object(w.useState)(2),r=Object(U.a)(n,2),c=r[0],a=r[1];return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{children:"Page2"}),Object(F.jsx)("button",{onClick:function(){return e(K())},children:"\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8"}),Object(F.jsx)("button",{onClick:function(){return e(X())},children:"\u30c7\u30af\u30ea\u30e1\u30f3\u30c8"}),Object(F.jsx)("input",{value:c,onChange:function(e){return a(Number(e.target.value))}}),Object(F.jsx)("button",{onClick:function(){return e(q(c))},children:"\u6570\u5024\u5206\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8"}),Object(F.jsx)("div",{children:t})]})},$=function(){return Object(F.jsx)("div",{children:"Top"})},ee=n(26),te=n.n(ee),ne=(n(78),n(12)),re=function(){for(var e=te()(),t=[],n=0;n<60;n++){var r="";r=n<10?"0"+n:"".concat(n),t[n]={user_name:"\u3064\u3080\u304e",text:"".concat(n+1),createdAt:e.format("YYYY-MM-DD HH:mm:".concat(r)),order:n+1}}Object(ne.i)(ot,t)},ce=Object(z.b)({name:"latestChatOrder",initialState:0,reducers:{setLatestChatOrder:function(e,t){return t.payload}}}),ae=ce.reducer,ie=ce.actions.setLatestChatOrder,se=function(){var e=Object(w.useState)(""),t=Object(U.a)(e,2),n=t[0],r=t[1],c=Object(w.useState)(""),a=Object(U.a)(c,2),i=a[0],s=a[1],o=Object(w.useState)(!1),d=Object(U.a)(o,2),u=d[0],j=d[1],l={latestChatOrder:E((function(e){return e.latestChatOrder}))}.latestChatOrder;return Object(F.jsxs)(oe,{children:[Object(F.jsx)(de,{children:"\u30e6\u30fc\u30b6\u30fc\u540d"}),u?Object(F.jsx)(le,{children:n}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ue,{value:n,onChange:function(e){return r(e.target.value)},placeholder:"\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"}),Object(F.jsx)(je,{onClick:function(){return function(e){var t=e.setIsLogin;0===e.userName.length?window.alert("\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u5165\u529b\u3057\u306a\u3044\u3068\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u307e\u305b\u3093"):t(!0)}({setIsLogin:j,userName:n})},children:"\u30ed\u30b0\u30a4\u30f3"})]}),Object(F.jsx)(be,{children:"\u30c6\u30ad\u30b9\u30c8"}),Object(F.jsx)(Oe,{value:i,onChange:function(e){return s(e.target.value)},placeholder:"\u30c6\u30ad\u30b9\u30c8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"}),Object(F.jsx)(he,{onClick:function(){return function(e){var t=e.userName,n=e.text,r=e.setText,c=e.isLogin,a=e.latestChatOrder;if(!1===c)window.alert("\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044");else if(0===n.length)window.alert("\u30c6\u30ad\u30b9\u30c8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");else{var i={user_name:t,text:n,createdAt:te()().format("YYYY-MM-DD HH:mm:ss"),order:a+1};Object(ne.f)(ot,i),r("")}}({userName:n,text:i,setText:s,isLogin:u,latestChatOrder:l})},children:"\u30c7\u30fc\u30bf\u8ffd\u52a0"}),Object(F.jsx)(xe,{onClick:re,children:"\u30b7\u30fc\u30c9\u30c7\u30fc\u30bf\u3067\u30ea\u30bb\u30c3\u30c8"}),Object(F.jsx)(pe,{onClick:function(){Object(ne.i)(ot,{}).catch((function(e){window.alert("\u30c7\u30fc\u30bf\u306e\u524a\u9664\u6642\u306b\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f"),console.log(e)}))},children:"\u30c7\u30fc\u30bf\u5168\u524a\u9664"}),Object(F.jsx)(ge,{children:"\u30e6\u30fc\u30b6\u30fc\u540d"}),Object(F.jsx)(fe,{children:"\u30c6\u30ad\u30b9\u30c8"}),Object(F.jsx)(me,{children:"\u4f5c\u6210\u65e5\u6642"}),Object(F.jsx)(ve,{children:"\u9806\u756a"})]})},oe=L.a.div(r||(r=Object(S.a)(["\n  display: grid;\n  grid-template-columns: 200px 200px 200px 200px;\n  grid-template-rows: 50px 50px 50px 50px;\n"]))),de=L.a.div(c||(c=Object(S.a)(["\n  grid-column-start: 1;\n  grid-column-end: 2;\n"]))),ue=L.a.input(a||(a=Object(S.a)(["\n  grid-column-start: 2;\n  grid-column-end: 3;\n"]))),je=L.a.button(i||(i=Object(S.a)(["\n  grid-column-start: 3;\n  grid-column-end: 4;\n"]))),le=L.a.div(s||(s=Object(S.a)(["\n  grid-column-start: 2;\n  grid-column-end: 4;\n"]))),be=L.a.div(o||(o=Object(S.a)(["\n  grid-column-start: 1;\n  grid-column-end: 2;\n  grid-row-start: 2;\n  grid-row-end: 3;\n"]))),Oe=L.a.input(d||(d=Object(S.a)(["\n  grid-column-start: 2;\n  grid-column-end: 4;\n  grid-row-start: 2;\n  grid-row-end: 3;\n"]))),he=L.a.button(u||(u=Object(S.a)(["\n  grid-row-start: 3;\n  grid-row-end: 4;\n"]))),xe=L.a.button(j||(j=Object(S.a)(["\n  grid-column-start: 2;\n  grid-column-end: 3;\n  grid-row-start: 3;\n  grid-row-end: 4;\n"]))),pe=L.a.button(l||(l=Object(S.a)(["\n  grid-column-start: 3;\n  grid-column-end: 4;\n  grid-row-start: 3;\n  grid-row-end: 4;\n"]))),ge=L.a.div(b||(b=Object(S.a)(["\n  grid-column-start: 1;\n  grid-column-end: 2;\n  grid-row-start: 4;\n  grid-row-end: 5;\n"]))),fe=L.a.div(O||(O=Object(S.a)(["\n  grid-column-start: 2;\n  grid-column-end: 3;\n  grid-row-start: 4;\n  grid-row-end: 5;\n"]))),me=L.a.div(h||(h=Object(S.a)(["\n  grid-column-start: 3;\n  grid-column-end: 4;\n  grid-row-start: 4;\n  grid-row-end: 5;\n"]))),ve=L.a.div(x||(x=Object(S.a)(["\n  grid-column-start: 4;\n  grid-column-end: 5;\n  grid-row-start: 4;\n  grid-row-end: 5;\n"]))),Ce=n(60),we=n.n(Ce),ke=n(92),ye=Object(z.b)({name:"chatData",initialState:[],reducers:{setChatData:function(e,t){return t.payload}}}),De=ye.reducer,Me=ye.actions.setChatData,Se=n(47),Ie=n(30),Le=function(e){var t=Object.entries(e||{}).map((function(e){var t=Object(U.a)(e,2);return{key:t[0],value:t[1]}})),n=Object(Ie.a)(t).reverse(),r=[];return n.map((function(e,t){return r[t]=Object(Se.a)(Object(Se.a)({},e.value),{},{key:e.key}),0})),r},Ye=Object(z.b)({name:"isChatsCompleted",initialState:!1,reducers:{setIsChatsCompleted:function(e,t){return t.payload}}}),Ne=Ye.reducer,Ae=Ye.actions.setIsChatsCompleted,Be=Object(z.b)({name:"hasMore",initialState:!0,reducers:{setHasMore:function(e,t){return t.payload}}}),He=Be.reducer,Pe=Be.actions.setHasMore,Te=Object(z.b)({name:"lastChatOrder",initialState:1,reducers:{setLastChatOrder:function(e,t){return t.payload}}}),Fe=Te.reducer,Re=Te.actions.setLastChatOrder,Ue=function(){var e={chatData:E((function(e){return e.chatData}))}.chatData,t={hasMore:E((function(e){return e.hasMore}))}.hasMore,n={isChatsCompleted:E((function(e){return e.isChatsCompleted}))}.isChatsCompleted,r={lastChatOrder:E((function(e){return e.lastChatOrder}))}.lastChatOrder,c=_().dispatch;return function(){var e=_().dispatch,t=Object(ne.g)(ot,Object(ne.e)("order"),Object(ne.c)(40));Object(w.useEffect)((function(){Object(ne.d)(Object(ne.g)(t),(function(t){console.log("\u30c1\u30e3\u30c3\u30c8\u30c7\u30fc\u30bf\u306e\u53d6\u5f97");var n=Le(t.val());if(e(Me(n)),0===n.length)e(ie(0)),e(Re(1));else{var r=n[n.length-1];e(ie(n[0].order)),e(Re(r.order))}n.length<40?e(Pe(!1)):e(Pe(!0)),e(Ae(!0))}))}),[])}(),console.log("\u30c1\u30e3\u30c3\u30c8\u8868\u793a\u9818\u57df\u306e\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0"),Object(F.jsx)(_e,{children:n?Object(F.jsx)(we.a,{loadMore:function(){return function(e){console.log("loadMore");var t=e.dispatch,n=e.chatData,r=e.lastChatOrder,c=e.hasMore,a=Object(ne.g)(ot,Object(ne.e)("order"),Object(ne.a)(r),Object(ne.c)(11));c&&Object(ne.d)(a,(function(e){console.log("\u30c1\u30e3\u30c3\u30c8\u30c7\u30fc\u30bf\u306e\u53d6\u5f97");var r=Le(e.val()),c=[].concat(Object(Ie.a)(n),Object(Ie.a)(r));if(t(Me(c)),0!==c.length){var a=c[c.length-1];1===a.order&&(console.log("\u7d42\u308f\u308a"),t(Pe(!1))),t(Re(a.order))}}),{onlyOnce:!0})}({dispatch:c,chatData:e,lastChatOrder:r,hasMore:t})},hasMore:t,loader:Object(F.jsx)(ke.a,{},0),initialLoad:!1,threshold:50,children:0===e.length?Object(F.jsx)("div",{children:"\u30c1\u30e3\u30c3\u30c8\u306f\u3042\u308a\u307e\u305b\u3093"}):e.map((function(e){return Object(F.jsxs)(ze,{children:[Object(F.jsx)(Ee,{children:e.user_name}),Object(F.jsx)(Ee,{children:e.text}),Object(F.jsx)(Ee,{children:te()(e.createdAt).fromNow()}),Object(F.jsx)(Ee,{children:e.order})]},e.key)}))}):Object(F.jsx)(ke.a,{})})},_e=L.a.div(p||(p=Object(S.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),ze=L.a.div(g||(g=Object(S.a)(["\n  display: flex;\n"]))),Ee=L.a.div(f||(f=Object(S.a)(["\n  width: 200px;\n"]))),Ge=function(){return te.a.locale("ja"),Object(F.jsxs)(Je,{children:[Object(F.jsx)(se,{}),Object(F.jsx)(Ue,{})]})},Je=L.a.div(m||(m=Object(S.a)(["\n  text-align: center;\n"]))),Ke=function(){return Object(F.jsxs)(Xe,{children:[Object(F.jsx)(Y.b,{to:B,children:"Redux"}),Object(F.jsx)(Y.b,{to:P,children:"ReduxThunk"}),Object(F.jsx)(Y.b,{to:T,children:"FireBase"})]})},Xe=L.a.div(v||(v=Object(S.a)(["\n  display: flex;\n  gap: 20px;\n"]))),qe=n(27),Qe=n.n(qe),Ve=n(33),We=Object(z.b)({name:"userData",initialState:[],reducers:{setUsers:function(e,t){return t.payload}}}),Ze=We.actions.setUsers,$e=We.reducer,et=function(){var e={userData:E((function(e){return e.userData}))}.userData,t=_().dispatch;return Object(F.jsxs)("div",{children:[Object(F.jsx)("button",{onClick:function(){return t(function(){var e=Object(Ve.a)(Qe.a.mark((function e(t){var n,r;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://jsonplaceholder.typicode.com/users");case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t(Ze(r));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"\u30d5\u30a7\u30c3\u30c1\u30c7\u30fc\u30bf"}),Object(F.jsx)("button",{onClick:function(){return t(Ze([]))},children:"\u30c7\u30fc\u30bf\u30af\u30ea\u30a2"}),e&&e.map((function(e,t){return Object(F.jsx)("div",{children:e.name},t)}))]})},tt=function(){return Object(F.jsx)(Y.b,{to:A,children:"Top"})},nt=function(){return Object(F.jsx)(Y.a,{basename:"/react-sandbox",children:Object(F.jsxs)(N.d,{children:[Object(F.jsxs)(N.b,{exact:!0,path:A,children:[Object(F.jsx)(Ke,{}),Object(F.jsx)($,{})]}),Object(F.jsxs)(N.b,{path:T,children:[Object(F.jsx)(tt,{}),Object(F.jsx)(Ge,{})]}),Object(F.jsxs)(N.b,{path:B,children:[Object(F.jsx)(R,{}),Object(F.jsx)(W,{})]}),Object(F.jsxs)(N.b,{path:H,children:[Object(F.jsx)(R,{}),Object(F.jsx)(Z,{})]}),Object(F.jsxs)(N.b,{path:P,children:[Object(F.jsx)(tt,{}),Object(F.jsx)(et,{})]}),Object(F.jsx)(N.b,{path:"*",children:Object(F.jsx)(N.a,{to:{pathname:A}})})]})})},rt=n(40),ct=Object(z.a)({reducer:{counter:V,chatData:De,isChatsCompleted:Ne,hasMore:He,latestChatOrder:ae,lastChatOrder:Fe,userData:$e},middleware:[rt.a]}),at=function(){return Object(F.jsx)(it,{children:Object(F.jsx)(I.a,{store:ct,children:Object(F.jsx)(nt,{})})})},it=L.a.div(C||(C=Object(S.a)(["\n    background-color: skyblue;\n    min-height: 100vh;\n"]))),st=Object(M.a)({apiKey:"AIzaSyCLifYdh2b-V9WzIK1X3cL9gRoI_q5UC24",authDomain:"chat-app-86125.firebaseapp.com",databaseURL:"https://chat-app-86125-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"chat-app-86125",storageBucket:"chat-app-86125.appspot.com",messagingSenderId:"717771492231",appId:"1:717771492231:web:4019216ccf20fc5052e122",measurementId:"G-BQCX5GM9PP"}),ot=function(e){var t=Object(ne.b)(e);return Object(ne.h)(t,"chats")}(st);D.a.render(Object(F.jsx)(k.a.StrictMode,{children:Object(F.jsx)(at,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.0a2deab4.chunk.js.map